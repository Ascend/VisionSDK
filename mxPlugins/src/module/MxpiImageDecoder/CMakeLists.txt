# The imagedecoder plugin need to remove compile option -fprofile-arcs -ftest-coverage
if(BUILD_TESTS)
    get_directory_property(CUR_OPTS COMPILE_OPTIONS)
    list(REMOVE_ITEM CUR_OPTS -fprofile-arcs -ftest-coverage)
    set_directory_properties(PROPERTIES COMPILE_OPTIONS "${CUR_OPTS}")
endif()
set(PLUGIN_NAME "mxpi_imagedecoder")
add_compile_options("-DPLUGIN_NAME=${PLUGIN_NAME}")
file(GLOB CUR_DIR_SRCS "*.cpp")
add_library(${PLUGIN_NAME} SHARED ${CUR_DIR_SRCS} ${MXPI_UTILS_FILE})
target_link_libraries(${PLUGIN_NAME} ${MXPLUGINS_COMMON_DEP_LIBS} gio-2.0)
install(TARGETS ${PLUGIN_NAME} DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/plugins)